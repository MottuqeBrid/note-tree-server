<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Note Tree Server — Overview</title>
    <style>
      :root {
        --bg: #f5f7fa;
        --card: #ffffff;
        --accent: #2a7be4;
        --muted: #6b7280;
        --glass: rgba(255, 255, 255, 0.6);
        --mono: "Courier New", monospace;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 32px;
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(180deg, var(--bg), #eef2f6);
        color: #111827;
        min-height: 100vh;
      }
      .wrap {
        max-width: 900px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1fr 340px;
        gap: 20px;
        align-items: start;
      }
      .card {
        background: var(--card);
        border-radius: 12px;
        padding: 22px;
        box-shadow: 0 6px 30px rgba(16, 24, 40, 0.06);
      }
      header h1 {
        margin: 0 0 6px 0;
        color: var(--accent);
      }
      header p {
        margin: 0;
        color: var(--muted);
      }
      .routes .route {
        background: #f3f7ff;
        border-left: 4px solid var(--accent);
        padding: 10px;
        border-radius: 6px;
        margin-bottom: 10px;
        font-family: var(--mono);
        color: var(--accent);
      }
      .small {
        font-size: 0.92rem;
        color: var(--muted);
      }
      pre.cmd {
        background: #0f1724;
        color: #e6eef8;
        padding: 12px;
        border-radius: 8px;
        overflow: auto;
        font-family: var(--mono);
        font-size: 0.95rem;
        margin: 8px 0 0 0;
      }
      .list li {
        margin: 8px 0;
      }
      .muted-box {
        background: linear-gradient(180deg, var(--glass), #fff);
        border-radius: 8px;
        padding: 10px;
        color: var(--muted);
        font-size: 0.95rem;
      }
      footer {
        margin-top: 18px;
        color: var(--muted);
        font-size: 0.9rem;
        text-align: center;
      }
      @media (max-width: 880px) {
        .wrap {
          grid-template-columns: 1fr;
          padding: 0 12px;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <main class="card">
        <header>
          <h1>Note Tree Server</h1>
          <p class="small">
            Node.js + Express backend for managing notes with MongoDB — concise
            project overview and routes.
          </p>
        </header>

        <section style="margin-top: 18px">
          <h3>Project overview</h3>
          <p class="small">
            This project provides the server scaffold for a note management app.
            Core areas present: routers, middleware, schemas, and a landing
            page. Most API endpoints are scaffolded or in-progress.
          </p>
        </section>

        <section style="margin-top: 14px">
          <h3>Current routes</h3>
          <div class="routes small">
            <div class="route">GET /</div>
            <div class="route">GET /api/users/me (protected)</div>
            <div class="route">GET /api/users/middleware (protected)</div>
            <div class="route">GET /api/users/single/:id (protected)</div>
            <div class="route">GET /api/dashboard/summary (protected)</div>
            <div class="route">GET /api/admin/users (admin)</div>
            <!-- Add more when implemented -->
            <div style="margin-top: 8px; color: var(--muted)">
              Note: many routes require authentication (verifyToken) and some
              require admin (checkAdmin).
            </div>
          </div>
        </section>

        <section style="margin-top: 16px">
          <h3>How to run (local)</h3>
          <ol class="small list">
            <li>
              Copy .env.example → .env and set values (do not commit .env).
            </li>
            <li>
              Install dependencies: <code class="small">npm install</code>
            </li>
            <li>Start server (dev):</li>
          </ol>
          <pre class="cmd">
# on Windows (PowerShell or CMD)
npm run dev
# or
node index.js
</pre
          >
        </section>

        <section style="margin-top: 16px">
          <h3>Known issues & important notes</h3>
          <ul class="small list">
            <li>Remove secrets from .env in VCS; add .env to .gitignore.</li>
            <li>
              Ensure middleware returns after sending a response to avoid
              "Cannot set headers after they are sent".
            </li>
            <li>Add a global 404 and error handler in index.js.</li>
            <li>
              Consider security: helmet, rate-limiter, validate inputs
              (Joi/Zod), and CORS settings.
            </li>
          </ul>
        </section>

        <section style="margin-top: 16px">
          <h3>Next recommended fixes</h3>
          <div class="muted-box">
            1) Fix checkAdmin and verifyToken to always return/exit after res.*.
            2) Add centralized error handler and 404 middleware. 3) Replace
            secrets with .env.example. 4) Add input validation and basic
            security middleware.
          </div>
        </section>

        <footer>&copy; 2025 Note Tree Server — backend scaffold</footer>
      </main>

      <aside class="card">
        <h3 style="margin-top: 0; color: var(--accent)">Quick reference</h3>

        <div style="margin-top: 10px">
          <strong>Server:</strong>
          <div class="small">index.js</div>
        </div>

        <div style="margin-top: 12px">
          <strong>Schemas:</strong>
          <div class="small">/schema/UserSchema.js (user)</div>
        </div>

        <div style="margin-top: 12px">
          <strong>Routers:</strong>
          <div class="small">/router/UserRouter.js</div>
        </div>

        <div style="margin-top: 12px">
          <strong>Middleware:</strong>
          <div class="small">verifyToken, checkAdmin</div>
        </div>

        <div style="margin-top: 14px">
          <strong>Useful commands</strong>
          <pre class="cmd">
# git safe-add
git rm --cached .env
echo ".env" >> .gitignore
git add . && git commit -m "Remove env from repo"</pre
          >
        </div>

        <div style="margin-top: 12px" class="small muted-box">
          Want me to apply fixes (404/error middleware, .env.example, checkAdmin
          patch)? Ask and I will update the project files.
        </div>
      </aside>
    </div>
  </body>
</html>
